<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è¨ºæ–­çµæœ | Bilson Doctor</title>
 <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1><span class="logo">Bilson</span><span class="logo-alt">Doctor</span> ğŸ©º</h1>
    <h2>è¨ºæ–­çµæœ</h2>
    <p class="subtitle">
      <strong>Bilson Doctor</strong> ãŒã‚¨ãƒ©ãƒ¼ã®åŸå› ã¨è§£æ±ºæ–¹æ³•ã‚’èª¬æ˜ã™ã‚‹ã‚ˆï¼
    </p>
  </header>

  <main>
    <section class="cheer-section">
      <div class="bilson-message">
        <img src="/img/bilson.png" alt="ãƒ“ãƒ«ã‚½ãƒ³" class="bilson-icon">
        <div class="speech-bubble"><%= @encourage_message.gsub("\n", "<br>") %></div>
      </div>
    </section>

    <% titles = ["ğŸ§  åŸå› ", "ğŸ”§ è§£æ±ºç­–", "ğŸ’¡ ä¿®æ­£ã‚³ãƒ¼ãƒ‰ä¾‹", "ğŸŒ± ã‚¢ãƒ‰ãƒã‚¤ã‚¹"] %>
    
    <% @messages.each do |item| %>
      <h2 class="section-title"><%= item[:title] %></h2>
      <div class="bilson-message">
        <img src="/img/bilson.png" alt="ãƒ“ãƒ«ã‚½ãƒ³" class="bilson-icon">
    
        <% formatted = item[:content]
            .gsub(/```(\w+)?\n(.*?)```/m) do
              lang = Regexp.last_match(1) || ''
              code = Regexp.last_match(2)
              "<pre><code class='language-#{lang}'>#{Rack::Utils.escape_html(code)}</code></pre>"
            end
            .gsub(/`([^`\n]+)`/, '<code class="inline-code">\1</code>')
            .gsub("\n", "<br>") %>
    
        <div class="speech-bubble"><%= formatted %></div>
      </div>
    <% end %>




    <div class="back-link">
      <a href="/" class="analyze-btn">ğŸ” ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</a>
    </div>
  </main>

  <footer>
    <p>Â© 2025 Ruby Doctor</p>
  </footer>
</body>

</html>
